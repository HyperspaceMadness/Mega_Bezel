![Mega_Bezel_Logo|512x256, 75%](upload://6PNkvcMF9Go9Wnk6OJXfYR1opXI.png) 

Mega Bezel is updated to V1.6.4_2022-12-11

Changes:
  * Guest Advanced updated to crt-guest-advanced-2022-11-28-release1
  * Presets
    * Reorganized Variation Presets (Base CRT Presets stay the same) including:
      * Megatron
      * Max Int Scale
      * Smoothed presets
    * Presets updated to reference .params files to avoid redundancy
    * These Params files can be used in any of your presets to apply pre-defined effects
    * Updated Smoothed presets, now there is the range of no smoothing to super smoothing
    * Updated Vector Presets made for FBNeo High Res Mode
      * Better mask display which is appropriate for color vector games
  * Fixed Glass Presets and brightness of Megatron in HDR
  * Tube Effects default values have been adjusted
  * Changed Sampling Multiplier now to use 100 by default, and 0 is no longer an option
    * If you have any presets with the sampling multiplier set to 0 you will need to change them
  * Fixed bug where Colored Gel was causing the tube to become transparent
  * Signal Noise Added (Noise in signal before the CRT shader)
    * Works independently of the retroarch viewport resolution
    * Choose between resolution of noise matching the scanline resolution, core resolution or smoothed resolution
  * Fixed Top/Bottom Cropping in NTSC presets which was doing incorrect sampling
  * Resolution Debug
    * Correct scale values are now shown when Viewport Zoom is used
    * Integers with no decimal are now shown when screen is at an integer scale 
  * Deconvergence Scale Mode Added
    * There are now a different deconvergence scaling modes
      * SCREEN - Scales relative to screen height - Default
      * OUTPUT - Scales relative to output height
      * ABSOLUTE - Does not scale
        * This means the deconvergence will look bigger if you are running at a lower resolution and vice versa
      * MASK - Will scale by the factor of the mask's current size
  * Fake Scanlines now applied before deconvergence so deconvergence will be applied above and below each scanline
  * Mask Size Auto Threshold Added
    * You can now see and set what the threshold is for the masks to increase size
  * Black Level Control in Grade has better incremental adjustment
    * This is now working well with the Post Brightness Affects Black Level
    * Used in the Vector preset so the vector brightness can be increased without the rest of the screen brightening

  * Note: Good trick for Scanlines on Black without destroying contrast
    * Increase the black level in grade to bring black up to a bit gray and scanlines appearing on the black
    * Reduce Gamma Out near the top of the full setting list to make the gray areas darker but keep scanlines



----------------------------------------------------
--- TODO  ---------------------------------------
----------------------------------------------------

  * Apply Fake Scanlines in CRT shader before deconvergence
    * Add some standard deconvergence which can be used with the rolling scanlines
  * Adjustable Bezel Curvature per side?
  * Add Explicit Resolution of Core
  * Put Splitscreen by Pass Viewer?
  * Revisit Tate Mode / Vertical Scanline and Rotate CRT artifacts
    * Fast Sharpen & Sharp Smoother currently work on x axis, should be relative to scanline direction
    * Get GTU to respect scanline direction
    * NTSC is causing blurriness when using FB Neo and Rotate CRT - Test Game Batrider
      * We need to know what orientation the game is in the first place to do this
    * When in interlacing mode for vertical opposite mult should do something
  * Use brightness values of sides to control static corner highlight
  * Fix Megatron Reflection
  * Create 4K Royale Preset

  * Add .params #reference to with all parameters commented out
  * We should have a middle pass which has the device behind the CRT tube

----------------------------------------------------
--- Examples  --------------------------------------
----------------------------------------------------
Recent Performance 2022-09-18
Spec RTX-2060, at 4K:
  240p image
    ADV 175
    XBR-ADV 170
    POTATO 422
    POTATO-XBR 390

  2K image
    ADV 105
    XBR-ADV 66

  4K image
    ADV 48
    XBR-ADV Crashed


----------------------------------------------------
--- Post V1  ---------------------------------------
----------------------------------------------------
  * Auto Rotate
  * Guess White/Black Matting?
  * Auto Shadow for image Layers above screen
  * Mega Back Light a la philips Hue/Ambient
  * Night light single glow - Place Glows
  * Fix Corner Shading

  * Double Bezel
  * Swap option for Blurry vs Sharp Tube Reflection
  * Do some OrionsAngel Arcade Presets
  * Add Rewind Effect?
  * Rotate Dual Screen
  * LCD behavior when reaching resolution limit?
  * Shadow from Cutout?
  * Large Slotmask Bitmap Mask
  * Hyllian Sync Version?

  * Black frames in Mupen64Plus-Next using parallel RDP, seen in Perfect Dark
    * Original scaling mode to deal with black final viewport in Parallel RDP in both mupen and Parallel cores.

Scene Dynamic Lighting
  * Reflection from screen on additional elements
    * Side Panels, Speaker Panel, Table
    * Masking of main and additional reflection
  * Bounce lighting from screen to room back to the scene
    * Masking behind devices
  * Sprite sheet for arcade Lighting loop
  * Sprite sheets for left and right machine attract mode loops
  * Split Normal vs Additive in layers

  * More Reflection from closer to middle of screen on bezel

  * Additional Screens driven by Sprite Sheets

  * Night Lighting - Modulate Range on top of Hue & Value

----------------------------------------------------
--- Independent Shader Stuff for Main Repo  --------
----------------------------------------------------
  * Add Test_Max_Resources to Repo
  * Make Resolution text shader it's own pass for Repo
    * Show Original Res, Previous Pass Res, Next Pass Res, Viewport
    * Move Resolution Debug to be top justified

  * Gameboy
    * Fix DMG Shader or make new one
    * Fix Low Contrast Issue
    * Multiple palettes including Custom for Gameboy  
    * Add Gameboy Palettes https://www.deviantart.com/thewolfbunny/gallery/69987002/game-boy-palettes

  * Independent Bezel Scaling not the same as non-int scale
    * Why? Maybe only in Portrait Res?
  * Outer reflection corner radius should be independent when in independent mode
  * See why very inner edge seems not affected by reflection mask

  * Startup Animation - Sprite Sheet

  * Frame Shading
    * Shading on frame interior edge?
    * Frame Inner edge static lighter line
    * Frame Interior Edge thickness
    * Fix shading with rounded outer corner
    * Frame shadow should follow corner radius

  * When reflection is off still see inner bezel edge reflection
  * Put Torridgristle LUT back in for blue skys?

Documentation
  Troubleshooting 
    New install of retroarch 
    Turn all overlays off 
    I have rings, wavy distortions (Moire)

Moire
  The Waves you are seeing are called a Moire effect, itâ€™s the same effect you see through a screen door sometimes.
  It is caused by using a crt shader with scanlines and tube curvature and made worse when the resolution is limited. It is a thorny problem , and sometimes hard to get rid of at 1080, it is much less of a problem at 4k.
  Things which can help/fix the problem
    Reducing strength of scanlines, 
    Reducing or curvature or setting it to 0 will definitely fix it.
    If you keep using curvature using Integer scale in the shader parameters can sometimes help.

    If making own presets reference from crt-Base presets 

Old Megabezel https://github.com/HyperspaceMadness/shaders_slang/tree/adf6dc3c0f09db11ebf4fbcf85098ac8232acfcc




----------------------------------------------------
--- Retroarch Features -----------------------------
----------------------------------------------------

  * Add Core Provided Aspect as Uniform
  * Add Rotation as Uniforms
  * Replace Text, for shader type, game & core, content directory
    * core_name
    * game_name
    * [shadertype], [gamename], [corename], [contentdirectory]
    * Check textures and use default if not found
    

  * Append (Prepend) Shader Preset - to add a shader preset to the beginning of the chain
  * Fix edit shader in UI - Changes are currently lost or need to apply twice
  * Fix loss of current parameter values when retroarch goes from full screen to window
  * Fix saving with same name with different capitalization creates self reference
  * Shaders folder as a path token, e.g. "[shaders]/shaders_slang/" [shaders_dir]?
  * Hide Parameters

  * Stop Reloading Shader multiple times on Save (Keep optional param)

  * Choose Textures in UI
    * Shader Textures in Sub Menu - Add ability to set texture overrides in retroarch UI
    * Shader Passes in Sub Menu

  * Dropdowns for indexed parameters?
  * Multiple references in one file for adding passes and parameter overrides
  * Edit Multiple References in UI vs Shader Passes, Discreetly change between Simple and Full

  * Onscreen Display of current shader preset
  * Reload Last Preset

  * Next/Previous Shader does not work well if shader was loaded as Game preset
    * Sometimes uses different directories, probably related to shader_path in live shader rather than originally loaded preset

  * Pass Scaling Types
    * Original scaling Type
    * MaxAbsolute scaling type?
      * If res is lower don't scale if larger scale to this res, good for PSX Upscaling
      * Would avoid people crashing with internal resolution multiple

  * Add "Timer" uniform variable vec4(total-count, count-since-shader-load, oscillator[1,0,1,0,1,...], [unknown/undefined])
    * Unknown could be frames since direction change, good for rewind effect 

  * Check for alias used multiple times appears as semantic error now
  * global.x is semantic error if x not in global
  * GIF support

Questions for Survey

What kind of intro would you like as default in the Mega Bezel?
Snow Only
Snow + CH 04
Snow + Mega Bezel Logo


* Old Perf Numbers before Caching
*  Performance of Base presets at 3840x2160 on Nvidia RTX2060:
  *  ADVANCED -                      78 FPS  -  No comparable old preset
  *  GLASS -                        150 FPS  -  Old Glass Preset        128 FPS
  *  STANDARD -                     135 FPS  -  Old Full Preset         140 FPS
  *  STANDARD-HD-CORE -             105 FPS
  *  BASIC-BORDER-WITH-REFLECTION - 175 FPS  -  Old Reflect Only Preset 165 FPS
  *  BASIC-BORDER -                 295 FPS  -  Old Screen Scale Preset 370 FPS
  
*  Performance on HD-CORE E.G. 1920x1080:
  *  ADVANCED -                     60 FPS 
  *  ADVANCED-HD-CORE -             70 FPS 
  *  STANDARD -                     85 FPS 
  *  STANDARD-HD-CORE -             100 FPS 
  *  BASIC-BORDER-WITH-REFLECTION - 126 FPS 
  *  BASIC-BORDER                 - 180 FPS 